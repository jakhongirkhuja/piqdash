import{G as y}from"./GoBackButton.8ec57f12.js";import{s as g}from"./globalFunction.5ce06618.js";import{_ as k,r as N,o as n,c,f,a as e,t as r,d as i,F as d,e as _,a2 as S,a3 as v}from"./index.34e73fda.js";const A={setup(){},components:{GoBackButton:y},data(){return{url:"https://api.pharmiq.uz/",user:{},company:{},companyAddress:{},companyHistory:{},companyMembers:{},resStringError:"",region:{},city:{}}},computed:{changeDateFormat:function(){const o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];let u=new Date(this.user.birthDate);return u.getDate()+" "+o[u.getMonth()]+" "+u.getFullYear()},changeDateFormatCreated:function(){const o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];let u=new Date(this.user.created_at);return u.getDate()+" "+o[u.getMonth()]+" "+u.getFullYear()}},methods:{changeFormat(){const o=this.phoneNumber.replace(/\D/g,"");this.phoneNumber="+"+o.substring(0,3)+" ( "+o.substring(3,5)+" ) "+o.substring(5,8)+"-"+o.substring(8,10)+"-"+o.substring(10,12)},async statusUpdate(o){let u=0;Object.keys(this.companyMembers).forEach(l=>{this.companyMembers[l].id==o&&(this.companyMembers[l].status=="Approved"?u=0:u=1)});const a={companyMember_id:o,memberStatus:u},b=g(),t=Object.assign(a,b);try{let l=localStorage.getItem("token");const h=await fetch(this.url+"api/v1/company/memberStatusUpdate",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer "+l}}),s=await h.json();window.scrollTo({top:0,behavior:"smooth"}),h.status==401?this.resStringError=s.message:s.error?typeof s.message=="object"?this.resError=s.message:this.resStringError=s.message:(this.resSuccess="Successfully updated",this.requestApi(),setTimeout(()=>{this.resSuccess=!1},3e3))}catch{}},async requestApi(){try{let o=localStorage.getItem("token");const a=await(await fetch(this.url+"api/v1/company/show/all?company_id="+this.$route.params.id,{method:"GET",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer "+o}})).json();console.log(a),window.scrollTo({top:0,behavior:"smooth"}),a.error?this.resStringError=a.message:(this.company=a.company,this.companyAddress=a.companyAddress,this.companyHistory=a.companyHistory,this.companyMembers=a.companyMembers,this.user=a.user,console.log(a))}catch(o){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",o)}}},created(){this.requestApi()}},p=o=>(S("data-v-2b0a8bb9"),o=o(),v(),o),E={class:"row mt-2"},w={class:"col-md-12"},M={class:"col-md-12"},C={key:0,class:"error"},D={key:0,class:"row"},B={class:"col-md-12"},j={class:"card"},F={class:"card-body"},T={class:"card-title"},O={class:"card-subtitle mb-2 text-muted"},U=p(()=>e("h3",{class:"card-title pt-2"},"Owner",-1)),J={key:0,style:{"font-size":"20px"}},G={key:1,href:"tel:{{user.phonebook? user.phonebook.phoneNumber: ''}}"},L={class:"col-md-12 mt-4"},P={class:"card"},R={class:"card-body"},I={class:"error"},H={key:1,class:"error"},V={key:2,class:"success"},q={class:"card"},x={class:"card-body"},z=p(()=>e("h5",{class:"card-title"},"Company Members",-1)),Y={key:0,class:"table"},K=p(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"First Name"),e("th",{scope:"col"},"Last Name"),e("th",{scope:"col"},"PhoneNumber"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Joined At")])],-1)),Q={key:0,href:"tel:"},W={style:{display:"flex","align-items":"center"}},X={class:"switch"},Z=["checked"],$=["onClick"],ee={key:1},se={class:"col-md-12 mt-4"},te={class:"card"},oe={class:"card-body"},re=p(()=>e("h5",{class:"card-title"},"Company History",-1)),ne={key:0,class:"table"},ce=p(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"First Name"),e("th",{scope:"col"},"Last Name"),e("th",{scope:"col"},"PhoneNumber"),e("th",{scope:"col"},"Time")])],-1)),ae={key:0,href:"tel:{{history.user.phonebook.phoneNumber}}"},ue={key:1};function ie(o,u,a,b,t,l){const h=N("GoBackButton");return n(),c(d,null,[f(h),e("div",null,[e("div",E,[e("div",w,[e("div",M,[t.resStringError?(n(),c("p",C,r(t.resStringError),1)):i("",!0)])])]),t.resStringError?i("",!0):(n(),c("div",D,[e("div",B,[e("div",j,[e("div",F,[e("h5",T,r(t.company.companyName),1),e("h6",O,r(t.companyAddress.city?t.companyAddress.city.name_ru:"")+", "+r(t.companyAddress.region?t.companyAddress.region.name_ru:"")+", "+r(t.companyAddress.addressline1),1),U,t.user?(n(),c("p",J,r(t.user.firstName)+" "+r(t.user.lastName),1)):i("",!0),t.user&&t.user.phonebook?(n(),c("a",G,r("+"+t.user.phonebook.phoneNumber.substring(0,3)+" ( "+t.user.phonebook.phoneNumber.substring(3,5)+" ) "+t.user.phonebook.phoneNumber.substring(5,8)+"-"+t.user.phonebook.phoneNumber.substring(8,10)+"-"+t.user.phonebook.phoneNumber.substring(10,12)),1)):i("",!0)])])]),e("div",L,[e("div",P,[e("div",R,[o.resError?(n(!0),c(d,{key:0},_(o.resError,(s,m)=>(n(),c("p",I,r(m)+" : "+r(s[0]),1))),256)):i("",!0),t.resStringError?(n(),c("p",H,r(t.resStringError),1)):i("",!0),o.resSuccess?(n(),c("p",V,r(o.resSuccess),1)):i("",!0)])]),e("div",q,[e("div",x,[z,t.companyMembers.length>0?(n(),c("table",Y,[K,e("tbody",null,[(n(!0),c(d,null,_(t.companyMembers,s=>(n(),c("tr",null,[e("td",null,r(s.user?s.user.firstName:""),1),e("td",null,r(s.user?s.user.lastName:""),1),e("td",null,[s.user&&s.user.phonebook?(n(),c("a",Q,r("+"+s.user.phonebook.phoneNumber.substring(0,3)+" ( "+s.user.phonebook.phoneNumber.substring(3,5)+" ) "+s.user.phonebook.phoneNumber.substring(5,8)+"-"+s.user.phonebook.phoneNumber.substring(8,10)+"-"+s.user.phonebook.phoneNumber.substring(10,12)),1)):i("",!0)]),e("td",W,[e("label",X,[e("input",{type:"checkbox",checked:s.status=="Approved"},null,8,Z),e("span",{class:"slider round",onClick:m=>l.statusUpdate(s.id)},null,8,$)])]),e("td",null,r(new Date(s.created_at).toLocaleDateString("ru-Ru")),1)]))),256))])])):(n(),c("p",ee,"Empty"))])])]),e("div",se,[e("div",te,[e("div",oe,[re,t.companyMembers.length>0?(n(),c("table",ne,[ce,e("tbody",null,[(n(!0),c(d,null,_(t.companyHistory,s=>(n(),c("tr",null,[e("td",null,r(s.status),1),e("td",null,r(s.companyName),1),e("td",null,r(s.user?s.user.firstName:""),1),e("td",null,r(s.user?s.user.lastName:""),1),e("td",null,[s.user&&s.user.phonebook?(n(),c("a",ae,r("+"+s.user.phonebook.phoneNumber.substring(0,3)+" ( "+s.user.phonebook.phoneNumber.substring(3,5)+" ) "+s.user.phonebook.phoneNumber.substring(5,8)+"-"+s.user.phonebook.phoneNumber.substring(8,10)+"-"+s.user.phonebook.phoneNumber.substring(10,12)),1)):i("",!0)]),e("td",null,r(new Date(s.created_at).toLocaleDateString("ru-Ru")),1)]))),256))])])):(n(),c("p",ue,"Empty"))])])])]))])],64)}const de=k(A,[["render",ie],["__scopeId","data-v-2b0a8bb9"]]);export{de as default};
