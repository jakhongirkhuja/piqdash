import{G as w}from"./GoBackButton.8ec57f12.js";import{c as U}from"./vue-datepicker.es.17b3f44e.js";import{h as E}from"./maska.esm.cd315c5a.js";import{u as V,r as j}from"./index.esm.b21b73c4.js";import{m as D}from"./default.css_vue_type_style_index_1_src_true_lang.61cceff5.js";import{M as x}from"./vue-multiselect.min.6cecc5c4.js";import{s as T}from"./globalFunction.5ce06618.js";import{_ as B,r as I,o as a,c as i,f as b,a as t,F as h,e as S,d as m,t as p,l as R,w as g,p as k,n as A,m as y,g as _,a1 as F,a2 as G,a3 as N}from"./index.34e73fda.js";import"./_commonjsHelpers.712cc82f.js";const q={setup(){return{v$:V()}},directives:{maska:E},components:{GoBackButton:w,Datepicker:U,Slider:D,Multiselect:x},data(){return{url:"https://api.pharmiq.uz/",promo:"",title:"",gender:"all",nrole:"all",age:"all",rage:[18,90],nage:20,price:null,groupID:null,startDate:null,endDate:null,added:!1,selectedNumbers:[],resError:!1,resSuccess:!1,resStringError:"",userInfo:null,monetized:0,customNumbers:0,numbers:0,groups:[]}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},mounted(){$(".js-example-basic-multiple").select2(),$(".js-example-basic-multiple").change(function(){var l=$(".js-example-basic-multiple").select2("val");localStorage.setItem("role",l)})},validations(){return{groupID:{required:j}}},methods:{checkvalues(){this.nage>90&&(this.nage=90),this.nage<18&&(this.nage=18)},async requestApi(){this.added=!0;let l={group_id:this.groupID,gender:this.gender,ageRange:this.age=="all"?"all":this.age==1?this.rage:this.nage,roleList:localStorage.getItem("role")?localStorage.getItem("role"):"all"};const o=T(),c=Object.assign(l,o);var s=new FormData;for(const e in c)s.append(e,c[e]);try{let e=localStorage.getItem("token");const d=await fetch(this.url+"api/v1/targetFilter/edit/"+this.$route.params.id,{method:"POST",body:s,headers:{"Accept-Language":"en-US,en;q=0.8",accept:"application/json",Authorization:"Bearer "+e}}),u=await d.json();window.scrollTo({top:0,behavior:"smooth"}),d.status==401?(this.resStringError=u.message,this.added=!1):u.error?(typeof u.message=="object"?this.resError=u.message:this.resStringError=u.message,this.added=!1):this.resSuccess="Target filter Successfully Updated"}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",e)}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()},requesttarget(){let l=this.url+"api/v1/targetFilter?targetfilter_id="+this.$route.params.id,o=localStorage.getItem("token");const c={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(l,c).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.response=s,s.ageRange.includes(",")?(this.age=1,this.rage=s.ageRange.split(",")):s.ageRange=="all"?this.age="all":(this.age=0,this.nage=s.ageRange),console.log(s.ageRange.includes(",")),this.groupID=s.group_id,$("#mySelect2").val(["1","2"]),this.gender=s.gender==null?"all":s.gender==!1?0:1,$(".js-example-basic-multiple").val(JSON.parse(s.roleList)).trigger("change")})},getGroups(){let l=this.url+"api/v1/groups?page=1",o=localStorage.getItem("token");const c={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(l,c).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.response=s,this.groups=s.data})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.getGroups(),this.requesttarget()}},n=l=>(G("data-v-45245a90"),l=l(),N(),l),z={class:"mt-3"},C={class:"row"},M={class:"col-md-12 grid-margin stretch-card"},O={class:"card"},L={class:"card-body"},H=n(()=>t("h4",{class:"card-title"},"Edit Target Filter",-1)),J={class:"error"},P={key:1,class:"error"},Z={key:2,class:"success"},K={class:"form-group row"},Q={class:"col-md-12"},W=n(()=>t("label",{class:"col-sm-12",for:"banner"},"Group",-1)),X=n(()=>t("option",{disabled:""},"Please select one",-1)),Y=["value"],ee={class:"form-group row"},te={class:"col-md-4 gender"},se=n(()=>t("label",{for:"exampleInputGenderRu"},"Gender",-1)),oe={class:"row"},re={class:"col-md-4"},le={for:"all"},ae=_("All "),ie={class:"col-md-4"},ne={for:"man"},ce=_("Man "),de={class:"col-md-4"},ue={for:"femaile"},pe=_("Female "),me={class:"col-md-4"},ge=F('<label for="exampleInputTitleUZ" data-v-45245a90>Role</label><select multiple="multiple" class="form-control js-example-basic-multiple" data-v-45245a90><option selected value="all" data-v-45245a90>All</option><option value="Employee" data-v-45245a90>Employee</option><option value="Company Owner" data-v-45245a90>Company Owner</option></select>',2),he={class:"col-md-4"},_e=n(()=>t("label",{for:"exampleInputTitleUZ"},"Age",-1)),ve=n(()=>t("option",{selected:"",value:"all"},"All",-1)),fe=n(()=>t("option",{value:"0"},"Range",-1)),be=n(()=>t("option",{value:"1"},"Range Limits",-1)),Se=[ve,fe,be],ye={key:0,class:"mb-2 mt-5"},Ie={key:1,class:"mt-5"},ke=["disabled"];function we(l,o,c,s,e,d){const u=I("GoBackButton"),v=I("Slider");return a(),i(h,null,[b(u),t("div",z,[t("div",C,[t("div",M,[t("div",O,[t("div",L,[H,e.resError?(a(!0),i(h,{key:0},S(e.resError,(r,f)=>(a(),i("p",J,p(f)+" : "+p(r[0]),1))),256)):m("",!0),e.resStringError?(a(),i("p",P,p(e.resStringError),1)):m("",!0),e.resSuccess?(a(),i("p",Z,p(e.resSuccess),1)):m("",!0),t("form",{class:"forms-sample",onSubmit:o[7]||(o[7]=R(r=>d.submitForm(),["prevent"]))},[t("div",K,[t("div",Q,[W,g(t("select",{"onUpdate:modelValue":o[0]||(o[0]=r=>e.groupID=r),class:A(["form-control",{"border border-danger":s.v$.groupID.$errors.length>0}])},[X,(a(!0),i(h,null,S(e.groups,r=>(a(),i("option",{key:r.id,value:r.id},p(r.groupName),9,Y))),128))],2),[[k,e.groupID]]),(a(!0),i(h,null,S(s.v$.groupID.$errors,(r,f)=>(a(),i("small",{class:"error",key:f},p(r.$message),1))),128))])]),t("div",ee,[t("div",te,[se,t("div",oe,[t("div",re,[t("label",le,[g(t("input",{id:"all",type:"radio",class:"l-2","onUpdate:modelValue":o[1]||(o[1]=r=>e.gender=r),value:"all"},null,512),[[y,e.gender]]),ae])]),t("div",ie,[t("label",ne,[g(t("input",{id:"man",type:"radio",class:"l-2","onUpdate:modelValue":o[2]||(o[2]=r=>e.gender=r),value:"0"},null,512),[[y,e.gender]]),ce])]),t("div",de,[t("label",ue,[g(t("input",{id:"femaile",type:"radio",class:"","onUpdate:modelValue":o[3]||(o[3]=r=>e.gender=r),value:"1"},null,512),[[y,e.gender]]),pe])])])]),t("div",me,[_(p(e.nrole)+" ",1),ge]),t("div",he,[_e,g(t("select",{"onUpdate:modelValue":o[4]||(o[4]=r=>e.age=r),class:"form-control"},Se,512),[[k,e.age]]),e.age==0?(a(),i("div",ye,[b(v,{onUpdate:d.checkvalues,modelValue:e.nage,"onUpdate:modelValue":o[5]||(o[5]=r=>e.nage=r)},null,8,["onUpdate","modelValue"])])):m("",!0),e.age==1?(a(),i("div",Ie,[b(v,{onUpdate:d.checkvalues,modelValue:e.rage,"onUpdate:modelValue":o[6]||(o[6]=r=>e.rage=r)},null,8,["onUpdate","modelValue"])])):m("",!0)])]),e.added?m("",!0):(a(),i("button",{key:0,type:"submit",disabled:d.isDisabled,class:"btn btn-primary mr-2"},"Update",8,ke))],32)])])])])])],64)}const Ae=B(q,[["render",we],["__scopeId","data-v-45245a90"]]);export{Ae as default};
