import{G as x}from"./GoBackButton.8ec57f12.js";import{c as U}from"./vue-datepicker.es.17b3f44e.js";import{h as T}from"./maska.esm.cd315c5a.js";import{u as C,r as b,m as y,a as k,b as S,i as V}from"./index.esm.b21b73c4.js";import{_ as D,r as B,o as l,c as n,f as j,a as e,F as p,e as h,d as f,t as i,w as m,p as N,n as _,v as g,a0 as E,g as I,a2 as R,a3 as P}from"./index.34e73fda.js";import{e as z}from"./exportFromJSON.de0e6beb.js";import"./globalFunction.5ce06618.js";const G={setup(){return{v$:C()}},directives:{maska:T},components:{GoBackButton:x,Datepicker:U},data(){return{url:"https://api.pharmiq.uz/",banner_ru:[],banner_ru_prev:null,banner_uz:[],banner_uz_prev:null,group_id:null,groups:[],title_ru:"",title_uz:"",body_ru:"",startDate:null,endDate:null,body_uz:"",categories:[],added:!1,resError:!1,resSuccess:!1,resStringError:"",userInfo:null,monetized:0,price:null,category_id:null,statistics:null,statisticsNotPass:null}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{category_id:{required:b},startDate:{required:b},title_ru:{required:b,minLengthValue:y(3),maxLengthValue:k(30)},title_uz:{required:b,minLengthValue:y(3),maxLengthValue:k(30)},body_ru:{required:b,minLengthValue:y(10)},body_uz:{required:b,minLengthValue:y(10)},price:{required:S(()=>this.monetized==1),integer:V},group_id:{required:S(()=>this.category_id=="special")}}},methods:{downloadFile(){const a="n-"+this.title_ru,o=z.types.csv,d=this.statistics;d&&z({data:d,fileName:a,exportType:o})},downloadFileNotPassed(){const a="notPassed-"+this.title_ru,o=z.types.csv,d=this.statisticsNotPass;d&&z({data:d,fileName:a,exportType:o})},getGroups(){let a=this.url+"api/v1/groups?page=1",o=localStorage.getItem("token");const d={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(a,d).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.groups=s.data})},uploadFilebannerRu(a){var o=a.target.files||a.dataTransfer.files;!o.length||(this.banner_ru=o[0],this.banner_ru_prev=URL.createObjectURL(o[0]))},uploadFilebannerUz(a){var o=a.target.files||a.dataTransfer.files;!o.length||(this.banner_uz=o[0],this.banner_uz_prev=URL.createObjectURL(o[0]))},submitForm(){this.v$.$touch(),this.v$.$error},checkvalue(){console.log(this.startDate)},getvalue(){console.log(this.monetized)},getCourse(){let a=this.url+"api/v1/course?id="+parseInt(this.$route.params.id),o=localStorage.getItem("token");const d={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(a,d).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{Object.keys(s).length==0&&this.$router.push({name:"courses.list"}),s.courseTypeByAccess==0?(this.category_id="special",this.group_id=s.courseForGroup,this.hideGroups=!0,this.getGroups()):this.category_id=s.category_id,this.monetized=s.courseMonetized==1,this.price=s.coursePrice,this.startDate=s.startDate,this.endDate=s.endDate,this.title_ru=JSON.parse(s.infos.courseTitleName).ru,this.title_uz=JSON.parse(s.infos.courseTitleName).uz,this.body_ru=JSON.parse(s.infos.courseInfo).ru,this.body_uz=JSON.parse(s.infos.courseInfo).uz,this.banner_ru_prev=this.url+"files/course/"+JSON.parse(s.infos.courseBanner).ru,this.banner_uz_prev=this.url+"files/course/"+JSON.parse(s.infos.courseBanner).uz})},getCategories(){let a=this.url+"api/v1/course/category?page=1",o=localStorage.getItem("token");const d={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(a,d).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.categories=s.data})},getStatistics(){let a=this.url+"api/v1/course/getCourseStatistics/"+parseInt(this.$route.params.id),o=localStorage.getItem("token");const d={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(a,d).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.statistics=s})},getStatisticsNot(){let a=this.url+"api/v1/course/getCourseStatisticsNotPassed/"+parseInt(this.$route.params.id),o=localStorage.getItem("token");const d={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(a,d).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.statisticsNotPass=s})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.getCourse(),this.getCategories(),this.getStatistics(),this.getStatisticsNot()}},u=a=>(R("data-v-27eacf1f"),a=a(),P(),a),F={class:"mt-3"},L={class:"row"},O={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},Z={class:"card-body"},J=u(()=>e("h4",{class:"card-title"},"Show Course",-1)),A={class:"error"},H={key:1,class:"error"},M={key:2,class:"success"},Q={class:"form-group row"},Y={class:"col-md-12"},K=u(()=>e("label",{class:"col-sm-3 col-form-label",for:"banner"},"Category",-1)),W=u(()=>e("option",{disabled:"",value:"0"},"Please select one",-1)),X=u(()=>e("option",{value:"special"},"Special",-1)),$=["selected","disabled","value"],ee={key:0,class:"col-md-12"},te=u(()=>e("label",{class:"col-sm-3",for:"banner"},"Group",-1)),se=["value","disabled"],oe={class:"form-group row"},re={class:"col-md-6"},le=u(()=>e("label",{for:"exampleInputTitleRu"},"Title (\u0420\u0423)",-1)),ne={class:"col-md-6"},ie=u(()=>e("label",{for:"exampleInputTitleUZ"},"Title (UZ)",-1)),ae={class:"form-group row"},ce={class:"col-md-6"},ue=u(()=>e("label",{for:"exampleInputbodyRu"},"Body (\u0420\u0423)",-1)),de={class:"col-md-6"},pe=u(()=>e("label",{for:"exampleInputbodyUZ"},"Body (UZ)",-1)),he={class:"form-group row"},me={class:"col-md-6"},_e=u(()=>e("label",{class:"col-sm-3 col-form-label",for:"banner"},"banner (\u0420\u0423)",-1)),ge=["src"],ve={class:"col-md-6"},be=u(()=>e("label",{class:"col-sm-3 col-form-label",for:"banner"},"banner (UZ)",-1)),fe=["src"],ye={class:"form-group row"},ze={class:"col-md-6"},ke=u(()=>e("label",{for:"exampleInputstartRu"},"Start Date",-1)),Se={class:"col-md-6"},Ne=u(()=>e("label",{for:"exampleInputendUZ"},"End Date ",-1)),Ie={class:"form-group row"},we={class:"col-md-6"},xe=u(()=>e("label",{for:"exampleInputstartRu"},"Course Monetized",-1)),Ue=u(()=>e("br",null,null,-1)),Te={class:"language-switcher"},Ce=u(()=>e("span",{class:"slider round"},null,-1)),Ve=u(()=>e("span",{class:"select-ru"},"No",-1)),De=u(()=>e("span",{class:"select-uz"},"Yes",-1)),Be={class:"col-md-6"},je=u(()=>e("label",{for:"exampleInputendUZ"},"Course Price ",-1)),Ee={class:"col-md-12 grid-margin stretch-card"},Re={class:"card"},Pe={class:"card-body"},Ge={class:"card-title"},Fe=I("Statistics "),Le={key:0,class:"table table-responsive"},Oe=u(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"User"),e("th",{scope:"col"},"Number"),e("th",{scope:"col"},"Role"),e("th",{scope:"col"},"Company Name"),e("th",{scope:"col"},"Team Name"),e("th",{scope:"col"},"Quiz Result")])],-1)),qe={scope:"row"},Ze={key:1},Je={class:"col-md-12 grid-margin stretch-card"},Ae={class:"card"},He={class:"card-body"},Me={class:"card-title"},Qe=I("Statistics Not Passed "),Ye={key:0,class:"table table-responsive"},Ke=u(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"User"),e("th",{scope:"col"},"Number"),e("th",{scope:"col"},"Role"),e("th",{scope:"col"},"Company Name"),e("th",{scope:"col"},"Team Name")])],-1)),We={scope:"row"},Xe={key:1};function $e(a,o,d,s,r,v){const w=B("GoBackButton");return l(),n(p,null,[j(w),e("div",F,[e("div",L,[e("div",O,[e("div",q,[e("div",Z,[J,r.resError?(l(!0),n(p,{key:0},h(r.resError,(t,c)=>(l(),n("p",A,i(c)+" : "+i(t[0]),1))),256)):f("",!0),r.resStringError?(l(),n("p",H,i(r.resStringError),1)):f("",!0),r.resSuccess?(l(),n("p",M,i(r.resSuccess),1)):f("",!0),e("div",Q,[e("div",Y,[K,m(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>r.category_id=t),class:_(["form-control",{"border border-danger":s.v$.category_id.$errors.length>0}])},[W,X,(l(!0),n(p,null,h(r.categories,t=>(l(),n("option",{key:t.id,selected:r.category_id==t.id,disabled:r.category_id!=t.id,value:t.id},i(JSON.parse(t.categoryName).ru),9,$))),128))],2),[[N,r.category_id]]),(l(!0),n(p,null,h(s.v$.category_id.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))]),a.hideGroups?(l(),n("div",ee,[te,m(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>r.group_id=t),class:_(["form-control",{"border border-danger":s.v$.group_id.$errors.length>0}])},[(l(!0),n(p,null,h(r.groups,t=>(l(),n("option",{key:t.id,value:t.id,disabled:r.group_id!=t.id},i(t.groupName),9,se))),128))],2),[[N,r.group_id]]),(l(!0),n(p,null,h(s.v$.group_id.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))])):f("",!0)]),e("div",oe,[e("div",re,[le,m(e("input",{type:"text",class:_(["form-control",{"border border-danger":s.v$.title_ru.$errors.length>0}]),id:"exampleInputTitleRu","onUpdate:modelValue":o[2]||(o[2]=t=>r.title_ru=t)},null,2),[[g,r.title_ru]]),(l(!0),n(p,null,h(s.v$.title_ru.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))]),e("div",ne,[ie,m(e("input",{type:"text",class:_(["form-control",{"border border-danger":s.v$.title_uz.$errors.length>0}]),id:"exampleInputTitleUZ","onUpdate:modelValue":o[3]||(o[3]=t=>r.title_uz=t)},null,2),[[g,r.title_uz]]),(l(!0),n(p,null,h(s.v$.title_uz.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))])]),e("div",ae,[e("div",ce,[ue,m(e("textarea",{rows:"10",type:"text",class:_(["form-control",{"border border-danger":s.v$.body_ru.$errors.length>0}]),id:"exampleInputTitleRu","onUpdate:modelValue":o[4]||(o[4]=t=>r.body_ru=t)},null,2),[[g,r.body_ru]]),(l(!0),n(p,null,h(s.v$.body_ru.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))]),e("div",de,[pe,m(e("textarea",{rows:"10",type:"text",class:_(["form-control",{"border border-danger":s.v$.body_uz.$errors.length>0}]),id:"exampleInputTitleUZ","onUpdate:modelValue":o[5]||(o[5]=t=>r.body_uz=t)},null,2),[[g,r.body_uz]]),(l(!0),n(p,null,h(s.v$.body_uz.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))])]),e("div",he,[e("div",me,[_e,r.banner_ru_prev?(l(),n("img",{key:0,src:r.banner_ru_prev,class:"image_prev"},null,8,ge)):f("",!0),e("input",{type:"file",id:"banner",onChange:o[6]||(o[6]=t=>v.uploadFilebannerRu(t)),accept:"image/*",class:"form-control"},null,32)]),e("div",ve,[be,r.banner_uz_prev?(l(),n("img",{key:0,src:r.banner_uz_prev,class:"image_prev"},null,8,fe)):f("",!0),e("input",{type:"file",id:"banner",onChange:o[7]||(o[7]=t=>v.uploadFilebannerUz(t)),accept:"image/*",class:"form-control"},null,32)])]),e("div",ye,[e("div",ze,[ke,m(e("input",{type:"date",class:_(["form-control",{"border border-danger":s.v$.startDate.$errors.length>0}]),id:"exampleInputstartRu","onUpdate:modelValue":o[8]||(o[8]=t=>r.startDate=t)},null,2),[[g,r.startDate]]),(l(!0),n(p,null,h(s.v$.startDate.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))]),e("div",Se,[Ne,m(e("input",{type:"date",class:"form-control",id:"exampleInputendUZ","onUpdate:modelValue":o[9]||(o[9]=t=>r.endDate=t)},null,512),[[g,r.endDate]])])]),e("div",Ie,[e("div",we,[xe,Ue,e("label",Te,[m(e("input",{onChange:o[10]||(o[10]=(...t)=>v.getvalue&&v.getvalue(...t)),type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=t=>r.monetized=t)},null,544),[[E,r.monetized]]),Ce,Ve,De])]),e("div",Be,[je,m(e("input",{type:"number",class:_(["form-control",{"border border-danger":s.v$.price.$errors.length>0}]),id:"exampleInputendUZ","onUpdate:modelValue":o[12]||(o[12]=t=>r.price=t)},null,2),[[g,r.price]]),(l(!0),n(p,null,h(s.v$.price.$errors,(t,c)=>(l(),n("small",{class:"error",key:c},i(t.$message),1))),128))])])])])]),e("div",Ee,[e("div",Re,[e("div",Pe,[e("h4",Ge,[Fe,e("div",{onClick:o[13]||(o[13]=t=>v.downloadFile()),class:"float-right btn btn-success"},"Export to excel")]),r.statistics&&r.statistics.length>0?(l(),n("table",Le,[Oe,e("tbody",null,[(l(!0),n(p,null,h(r.statistics,(t,c)=>(l(),n("tr",null,[e("th",qe,i(c),1),e("td",null,i(t.user),1),e("td",null,i(t.phoneNumber),1),e("td",null,i(t.role),1),e("td",null,i(t.companyName),1),e("td",null,i(t.teamName),1),e("td",null,i(t.quizResult),1)]))),256))])])):(l(),n("div",Ze,"Empty"))])])]),e("div",Je,[e("div",Ae,[e("div",He,[e("h4",Me,[Qe,e("div",{onClick:o[14]||(o[14]=t=>v.downloadFileNotPassed()),class:"float-right btn btn-success"},"Export to excel")]),r.statisticsNotPass&&r.statisticsNotPass.length>0?(l(),n("table",Ye,[Ke,e("tbody",null,[(l(!0),n(p,null,h(r.statisticsNotPass,(t,c)=>(l(),n("tr",null,[e("th",We,i(c),1),e("td",null,i(t.user),1),e("td",null,i(t.phoneNumber),1),e("td",null,i(t.role),1),e("td",null,i(t.companyName),1),e("td",null,i(t.teamName),1)]))),256))])])):(l(),n("div",Xe,"Empty"))])])])])])],64)}const it=D(G,[["render",$e],["__scopeId","data-v-27eacf1f"]]);export{it as default};
