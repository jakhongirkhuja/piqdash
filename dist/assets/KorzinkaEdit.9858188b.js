import{G as k}from"./GoBackButton.8ec57f12.js";import{c as S}from"./vue-datepicker.es.17b3f44e.js";import{h as w}from"./maska.esm.cd315c5a.js";import{u as B,b as g,r as T}from"./index.esm.b21b73c4.js";import{_ as z,r as E,o,c as a,f as I,a as n,F as h,e as f,d as p,t as c,l as q,w as v,p as C,n as b,v as y,a2 as j,a3 as G}from"./index.34e73fda.js";import{s as U}from"./globalFunction.5ce06618.js";const x={setup(){return{v$:B()}},directives:{maska:w},components:{GoBackButton:k,Datepicker:S},data(){return{url:"https://api.pharmiq.uz/",name_ru:"",name_uz:"",banner_ru:null,price:0,amount:0,added:!1,facevalue:null,barcode:null,resError:!1,importType:0,resSuccess:!1,resStringError:"",userInfo:null,descriptionText_ru:"",descriptionText_uz:"",storeChoose:null,store:[],banner_ru_prev:[]}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{barcode:{required:g(()=>this.importType==0)},facevalue:{required:g(()=>this.importType==0)},storeChoose:{required:T}}},methods:{async requestApi(){this.added=!0;const i={barcode:this.barcode,facevalue:this.facevalue,store_id:this.storeChoose},s=U(),l=Object.assign(i,s);var e=new FormData;for(const r in l)e.append(r,l[r]);try{let r=localStorage.getItem("token");const m=await fetch(this.url+"api/v1/store/korzinkabarcode/edit/"+this.$route.params.id,{method:"POST",body:e,headers:{"Accept-Language":"en-US,en;q=0.8",accept:"application/json",Authorization:"Bearer "+r}}),d=await m.json();window.scrollTo({top:0,behavior:"smooth"}),m.status==401?(this.resStringError=d.message,this.added=!1):d.error?(typeof d.message=="object"?this.resError=d.message:this.resStringError=d.message,this.added=!1,this.disabled=!1):(this.added=!1,this.disabled=!1,this.resSuccess="Barcode Successfully Updated")}catch(r){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",r)}},uploadFilebannerRu(i){var s=i.target.files||i.dataTransfer.files;if(s.length==0){this.banner_ru=[],this.banner_ru_prev=[];return}for(let l=0;l<s.length;l++){const e=s[l];this.banner_ru.push(e),this.banner_ru_prev.push(URL.createObjectURL(e))}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()},requestGetStore(){let i=this.url+"api/v1/store/getStoresByType?type=digital",s=localStorage.getItem("token");const l={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+s})};fetch(i,l).then(e=>(e.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),e.json())).then(e=>{this.store=e.data})},requestGetKorzinka(){let i=this.url+"api/v1/store/korzinkabarcode?category_id="+this.$route.params.id,s=localStorage.getItem("token");const l={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+s})};fetch(i,l).then(e=>(e.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),e.json())).then(e=>{e&&(this.storeChoose=e.store_id,this.barcode=e.barcode,this.facevalue=e.facevalue)})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.requestGetStore(),this.requestGetKorzinka()}},_=i=>(j("data-v-7126f779"),i=i(),G(),i),V={class:"mt-3"},A={class:"row"},F={class:"col-md-12 grid-margin stretch-card"},$={class:"card"},D={class:"card-body"},K=_(()=>n("h4",{class:"card-title"},"Edit Barcode",-1)),L={class:"error"},N={key:1,class:"error"},O={key:2,class:"success"},R={class:"form-group row"},M={class:"col-md-12"},H=_(()=>n("label",{for:"banner"},"Stores",-1)),P=_(()=>n("option",{disabled:"",value:"0"},"Please select one",-1)),J=["value"],Q={key:0,class:"col-md-6"},W=_(()=>n("label",{for:"barcode"},"Barcode ",-1)),X={key:1,class:"col-md-6"},Y=_(()=>n("label",{for:"facevalue"},"FaceValue",-1)),Z=["disabled"];function ee(i,s,l,e,r,m){const d=E("GoBackButton");return o(),a(h,null,[I(d),n("div",V,[n("div",A,[n("div",F,[n("div",$,[n("div",D,[K,r.resError?(o(!0),a(h,{key:0},f(r.resError,(t,u)=>(o(),a("p",L,c(u)+" : "+c(t[0]),1))),256)):p("",!0),r.resStringError?(o(),a("p",N,c(r.resStringError),1)):p("",!0),r.resSuccess?(o(),a("p",O,c(r.resSuccess),1)):p("",!0),n("form",{class:"forms-sample",onSubmit:s[3]||(s[3]=q(t=>m.submitForm(),["prevent"]))},[n("div",R,[n("div",M,[H,v(n("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.storeChoose=t),class:b(["form-control",{"border border-danger":e.v$.storeChoose.$errors.length>0}])},[P,(o(!0),a(h,null,f(r.store,t=>(o(),a("option",{key:t.id,value:t.id},c(t.name),9,J))),128))],2),[[C,r.storeChoose]]),(o(!0),a(h,null,f(e.v$.storeChoose.$errors,(t,u)=>(o(),a("small",{class:"error",key:u},c(t.$message),1))),128))]),r.importType==0?(o(),a("div",Q,[W,v(n("input",{type:"text",class:b(["form-control",{"border border-danger":e.v$.barcode.$errors.length>0}]),placeholder:"Barcode",id:"barcode","onUpdate:modelValue":s[1]||(s[1]=t=>r.barcode=t)},null,2),[[y,r.barcode]]),(o(!0),a(h,null,f(e.v$.barcode.$errors,(t,u)=>(o(),a("small",{class:"error",key:u},c(t.$message),1))),128))])):p("",!0),r.importType==0?(o(),a("div",X,[Y,v(n("input",{type:"number",class:b(["form-control",{"border border-danger":e.v$.facevalue.$errors.length>0}]),placeholder:"0",id:"facevalue","onUpdate:modelValue":s[2]||(s[2]=t=>r.facevalue=t)},null,2),[[y,r.facevalue]]),(o(!0),a(h,null,f(e.v$.facevalue.$errors,(t,u)=>(o(),a("small",{class:"error",key:u},c(t.$message),1))),128))])):p("",!0)]),r.added?p("",!0):(o(),a("button",{key:0,type:"submit",disabled:m.isDisabled,class:"btn btn-primary mr-2"},"Update",8,Z))],32)])])])])])],64)}const ie=z(x,[["render",ee],["__scopeId","data-v-7126f779"]]);export{ie as default};
