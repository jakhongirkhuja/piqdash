import{G as S}from"./GoBackButton.8ec57f12.js";import{c as I}from"./vue-datepicker.es.17b3f44e.js";import{h as k}from"./maska.esm.cd315c5a.js";import{u as z,r as g,m as y,b as U,i as T}from"./index.esm.b21b73c4.js";import{_ as w,r as C,o as n,c as l,f as V,a as r,F as u,e as c,d as x,t as a,l as E,w as b,p as R,n as _,v,a2 as A,a3 as $}from"./index.34e73fda.js";import{s as B}from"./globalFunction.5ce06618.js";const P={setup(){return{v$:z()}},directives:{maska:k},components:{GoBackButton:S,Datepicker:I},data(){return{url:"https://api.pharmiq.uz/",name_ru:"",name_uz:"",banner_ru:[],price:0,amount:0,added:!1,resError:!1,resSuccess:!1,resStringError:"",userInfo:null,descriptionText_ru:"",descriptionText_uz:"",storeChoose:null,store:[],banner_ru_prev:[]}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{descriptionText_ru:{required:g,minLengthValue:y(5)},descriptionText_uz:{required:g,minLengthValue:y(5)},banner_ru:{required:U(()=>this.banner_ru.length==0)},name_ru:{required:g,minLengthValue:y(3)},name_uz:{required:g,minLengthValue:y(3)},price:{required:g,integer:T},amount:{required:g,integer:T},storeChoose:{required:g}}},methods:{async requestApi(){this.added=!0;const d={name_ru:this.name_ru.toUpperCase(),name_uz:this.name_uz.toUpperCase(),description_ru:this.descriptionText_ru,description_uz:this.descriptionText_uz,price:this.price,amount:this.amount,ordered:0,category_id:1,store_id:this.storeChoose},o=B(),p=Object.assign(d,o);var s=new FormData;this.banner_ru.forEach(t=>{s.append("img[]",t)});for(const t in p)s.append(t,p[t]);try{let t=localStorage.getItem("token");const f=await fetch(this.url+"api/v1/store/physicalstore/products/add",{method:"POST",body:s,headers:{"Accept-Language":"en-US,en;q=0.8",accept:"application/json",Authorization:"Bearer "+t}}),h=await f.json();window.scrollTo({top:0,behavior:"smooth"}),f.status==401?(this.resStringError=h.message,this.added=!1):h.error?(typeof h.message=="object"?this.resError=h.message:this.resStringError=h.message,this.added=!1):this.resSuccess="Store Successfully Added"}catch(t){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",t)}},uploadFilebannerRu(d){var o=d.target.files||d.dataTransfer.files;if(o.length==0){this.banner_ru=[],this.banner_ru_prev=[];return}for(let p=0;p<o.length;p++){const s=o[p];this.banner_ru.push(s),this.banner_ru_prev.push(URL.createObjectURL(s))}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()},requestGetStore(){let d=this.url+"api/v1/getStoresByType?type=phyisical",o=localStorage.getItem("token");const p={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(d,p).then(s=>(s.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),s.json())).then(s=>{this.store=s.data})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.requestGetStore()}},m=d=>(A("data-v-a145a449"),d=d(),$(),d),q={class:"mt-3"},j={class:"row"},L={class:"col-md-12 grid-margin stretch-card"},D={class:"card"},N={class:"card-body"},O=m(()=>r("h4",{class:"card-title"},"Add Physical Store Product",-1)),F={class:"error"},G={key:1,class:"error"},M={key:2,class:"success"},Z={class:"form-group row"},H={class:"col-md-12"},X=m(()=>r("label",{for:"banner"},"Stores",-1)),J=m(()=>r("option",{disabled:"",value:"0"},"Please select one",-1)),K=["value"],Q={class:"col-md-6"},W=m(()=>r("label",{for:"exampleInputTitleRu"},"Name ru",-1)),Y={class:"col-md-6"},ee=m(()=>r("label",{for:"exampleInputTitleRu"},"Name uz",-1)),re={class:"col-md-6"},te=m(()=>r("label",{for:"exampleInputTitleRu"},"Description ru ",-1)),se={class:"col-md-6"},oe=m(()=>r("label",{for:"exampleInputTitleRu"},"Description uz ",-1)),ne={class:"col-md-12"},le=m(()=>r("label",{class:"col-sm-4",for:"banner"},"Image",-1)),ie=["src"],ae={class:"col-md-6"},ue=m(()=>r("label",{for:"exampleInputTitleUZ"},"Price $",-1)),de={class:"col-md-6"},ce=m(()=>r("label",{for:"exampleInputTitleUZ"},"Amount",-1)),me=["disabled"];function pe(d,o,p,s,t,f){const h=C("GoBackButton");return n(),l(u,null,[V(h),r("div",q,[r("div",j,[r("div",L,[r("div",D,[r("div",N,[O,t.resError?(n(!0),l(u,{key:0},c(t.resError,(e,i)=>(n(),l("p",F,a(i)+" : "+a(e[0]),1))),256)):x("",!0),t.resStringError?(n(),l("p",G,a(t.resStringError),1)):x("",!0),t.resSuccess?(n(),l("p",M,a(t.resSuccess),1)):x("",!0),r("form",{class:"forms-sample",onSubmit:o[8]||(o[8]=E(e=>f.submitForm(),["prevent"]))},[r("div",Z,[r("div",H,[X,b(r("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>t.storeChoose=e),class:_(["form-control",{"border border-danger":s.v$.storeChoose.$errors.length>0}])},[J,(n(!0),l(u,null,c(t.store,e=>(n(),l("option",{key:e.id,value:e.id},a(e.name),9,K))),128))],2),[[R,t.storeChoose]]),(n(!0),l(u,null,c(s.v$.storeChoose.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",Q,[W,b(r("input",{type:"text",class:_(["form-control capilizie",{"border border-danger":s.v$.name_ru.$errors.length>0}]),placeholder:"IPHONE 14 PRO MAX",id:"exampleInputTitleRu","onUpdate:modelValue":o[1]||(o[1]=e=>t.name_ru=e)},null,2),[[v,t.name_ru]]),(n(!0),l(u,null,c(s.v$.name_ru.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",Y,[ee,b(r("input",{type:"text",class:_(["form-control capilizie",{"border border-danger":s.v$.name_uz.$errors.length>0}]),placeholder:"IPHONE 14 PRO MAX UZ",id:"exampleInputTitleRu","onUpdate:modelValue":o[2]||(o[2]=e=>t.name_uz=e)},null,2),[[v,t.name_uz]]),(n(!0),l(u,null,c(s.v$.name_uz.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",re,[te,b(r("input",{type:"text",class:_(["form-control",{"border border-danger":s.v$.descriptionText_ru.$errors.length>0}]),id:"exampleInputTitleRu","onUpdate:modelValue":o[3]||(o[3]=e=>t.descriptionText_ru=e)},null,2),[[v,t.descriptionText_ru]]),(n(!0),l(u,null,c(s.v$.descriptionText_ru.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",se,[oe,b(r("input",{type:"text",class:_(["form-control",{"border border-danger":s.v$.descriptionText_uz.$errors.length>0}]),id:"exampleInputTitleUz","onUpdate:modelValue":o[4]||(o[4]=e=>t.descriptionText_uz=e)},null,2),[[v,t.descriptionText_uz]]),(n(!0),l(u,null,c(s.v$.descriptionText_uz.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",ne,[le,(n(!0),l(u,null,c(t.banner_ru_prev,e=>(n(),l("img",{src:e,width:"100",class:"image_prev"},null,8,ie))),256)),r("input",{type:"file",id:"banner",onChange:o[5]||(o[5]=e=>f.uploadFilebannerRu(e)),multiple:"",accept:"image/*",class:_([{"border border-danger":s.v$.banner_ru.$errors.length>0},"form-control"])},null,34),(n(!0),l(u,null,c(s.v$.banner_ru.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",ae,[ue,b(r("input",{type:"number",class:_(["form-control",{"border border-danger":s.v$.price.$errors.length>0}]),placeholder:"100",id:"exampleInputTitleUZ","onUpdate:modelValue":o[6]||(o[6]=e=>t.price=e)},null,2),[[v,t.price]]),(n(!0),l(u,null,c(s.v$.price.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))]),r("div",de,[ce,b(r("input",{type:"number",class:_(["form-control",{"border border-danger":s.v$.amount.$errors.length>0}]),placeholder:"10",id:"exampleInputTitleUZ","onUpdate:modelValue":o[7]||(o[7]=e=>t.amount=e)},null,2),[[v,t.amount]]),(n(!0),l(u,null,c(s.v$.amount.$errors,(e,i)=>(n(),l("small",{class:"error",key:i},a(e.$message),1))),128))])]),t.added?x("",!0):(n(),l("button",{key:0,type:"submit",disabled:f.isDisabled,class:"btn btn-primary mr-2"},"Create",8,me))],32)])])])])])],64)}const ye=w(P,[["render",pe],["__scopeId","data-v-a145a449"]]);export{ye as default};
