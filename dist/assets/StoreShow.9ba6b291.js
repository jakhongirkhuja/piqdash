import{G as I}from"./GoBackButton.8ec57f12.js";import{c as y}from"./vue-datepicker.es.17b3f44e.js";import{h as k}from"./maska.esm.cd315c5a.js";import{u as z,r as m,m as f,i as S}from"./index.esm.b21b73c4.js";import{_ as w,r as C,o as n,c as l,f as U,a as e,F as d,e as p,d as b,t as a,l as O,w as h,p as N,n as _,v as g,a2 as V,a3 as B}from"./index.34e73fda.js";import"./globalFunction.5ce06618.js";const E={setup(){return{v$:z()}},directives:{maska:k},components:{GoBackButton:I,Datepicker:y},data(){return{url:"https://api.pharmiq.uz/",name_ru:"",name_uz:"",banner_ru:[],price:0,amount:0,added:!1,resError:!1,resSuccess:!1,resStringError:"",userInfo:null,descriptionText_ru:"",descriptionText_uz:"",storeChoose:null,store:[],orders:[]}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{descriptionText_ru:{required:m,minLengthValue:f(5)},descriptionText_uz:{required:m,minLengthValue:f(5)},name_ru:{required:m,minLengthValue:f(3)},name_uz:{required:m,minLengthValue:f(3)},price:{required:m,integer:S},amount:{required:m,integer:S},storeChoose:{required:m}}},methods:{uploadFilebannerRu(i){var o=i.target.files||i.dataTransfer.files;if(!o.length){this.banner_ru=[],this.banner_ru_prev="";return}this.banner_ru=o[0],this.banner_ru_prev=URL.createObjectURL(o[0])},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()},requestGetStore(){let i=this.url+"api/v1/store?page=1",o=localStorage.getItem("token");const v={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(i,v).then(r=>(r.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),r.json())).then(r=>{this.store=r.data})},requestGetOrders(){let i=this.url+"api/v1/store/product/buyProduct/show?product_id="+this.$route.params.id,o=localStorage.getItem("token");const v={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(i,v).then(r=>(r.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),r.json())).then(r=>{r.length>0&&(this.orders=r)})},getStore(){let i=this.url+"api/v1/store/product?product_id="+this.$route.params.id,o=localStorage.getItem("token");const v={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(i,v).then(r=>(r.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),r.json())).then(r=>{r&&(this.name_ru=JSON.parse(r.productName).ru,this.name_uz=JSON.parse(r.productName).uz,this.descriptionText_ru=JSON.parse(r.productDescription).ru,this.descriptionText_uz=JSON.parse(r.productDescription).uz,this.price=r.productCost,this.amount=r.productAmount,this.banner_ru_prev=this.url+"files/store/"+r.productIMG,this.storeChoose=r.store_id)})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.getStore(),this.requestGetStore(),this.requestGetOrders()}},c=i=>(V("data-v-d4663e33"),i=i(),B(),i),G={class:"mt-3"},R={class:"row"},$={class:"col-md-12 grid-margin stretch-card"},j={class:"card"},q={class:"card-body"},P=c(()=>e("h4",{class:"card-title"},"Show Product",-1)),A={class:"error"},D={key:1,class:"error"},L={key:2,class:"success"},M={class:"form-group row"},F={class:"col-md-12"},H=c(()=>e("label",{for:"banner"},"Stores",-1)),J=c(()=>e("option",{disabled:"",value:"0"},"Please select one",-1)),Z=["value"],X={class:"col-md-6"},K=c(()=>e("label",{for:"exampleInputTitleRu"},"Name ru",-1)),Q={class:"col-md-6"},W=c(()=>e("label",{for:"exampleInputTitleRu"},"Name uz",-1)),Y={class:"col-md-6"},ee=c(()=>e("label",{for:"exampleInputTitleRu"},"Description ru ",-1)),re={class:"col-md-6"},te=c(()=>e("label",{for:"exampleInputTitleRu"},"Description uz ",-1)),oe={class:"col-md-12"},se=c(()=>e("label",{class:"col-sm-4",for:"banner"},"Image",-1)),ne=["src"],le={class:"col-md-6"},ie=c(()=>e("label",{for:"exampleInputTitleUZ"},"Price $",-1)),ae={class:"col-md-6"},ue=c(()=>e("label",{for:"exampleInputTitleUZ"},"Amount",-1)),ce={class:"col-md-12 grid-margin stretch-card"},de={class:"card"},pe={class:"card-body"},me=c(()=>e("h4",{class:"card-title"},"Product Orders",-1)),he={class:"table"},_e=c(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Order Count"),e("th",{scope:"col"},"Order Time"),e("th",{scope:"col"},"Code")])],-1)),ve={key:0};function ge(i,o,v,r,s,T){const x=C("GoBackButton");return n(),l(d,null,[U(x),e("div",G,[e("div",R,[e("div",$,[e("div",j,[e("div",q,[P,s.resError?(n(!0),l(d,{key:0},p(s.resError,(t,u)=>(n(),l("p",A,a(u)+" : "+a(t[0]),1))),256)):b("",!0),s.resStringError?(n(),l("p",D,a(s.resStringError),1)):b("",!0),s.resSuccess?(n(),l("p",L,a(s.resSuccess),1)):b("",!0),e("form",{class:"forms-sample",onSubmit:o[7]||(o[7]=O(t=>T.submitForm(),["prevent"]))},[e("div",M,[e("div",F,[H,h(e("select",{disabled:"","onUpdate:modelValue":o[0]||(o[0]=t=>s.storeChoose=t),class:_(["form-control",{"border border-danger":r.v$.storeChoose.$errors.length>0}])},[J,(n(!0),l(d,null,p(s.store,t=>(n(),l("option",{key:t.id,value:t.id},a(t.storeName),9,Z))),128))],2),[[N,s.storeChoose]]),(n(!0),l(d,null,p(r.v$.storeChoose.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))]),e("div",X,[K,h(e("input",{disabled:"",type:"text",class:_(["form-control capilizie",{"border border-danger":r.v$.name_ru.$errors.length>0}]),placeholder:"IPHONE 14 PRO MAX",id:"exampleInputTitleRu","onUpdate:modelValue":o[1]||(o[1]=t=>s.name_ru=t)},null,2),[[g,s.name_ru]]),(n(!0),l(d,null,p(r.v$.name_ru.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))]),e("div",Q,[W,h(e("input",{disabled:"",type:"text",class:_(["form-control capilizie",{"border border-danger":r.v$.name_uz.$errors.length>0}]),placeholder:"IPHONE 14 PRO MAX UZ",id:"exampleInputTitleRu","onUpdate:modelValue":o[2]||(o[2]=t=>s.name_uz=t)},null,2),[[g,s.name_uz]]),(n(!0),l(d,null,p(r.v$.name_uz.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))]),e("div",Y,[ee,h(e("input",{disabled:"",type:"text",class:_(["form-control",{"border border-danger":r.v$.descriptionText_ru.$errors.length>0}]),id:"exampleInputTitleRu","onUpdate:modelValue":o[3]||(o[3]=t=>s.descriptionText_ru=t)},null,2),[[g,s.descriptionText_ru]]),(n(!0),l(d,null,p(r.v$.descriptionText_ru.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))]),e("div",re,[te,h(e("input",{disabled:"",type:"text",class:_(["form-control",{"border border-danger":r.v$.descriptionText_uz.$errors.length>0}]),id:"exampleInputTitleUz","onUpdate:modelValue":o[4]||(o[4]=t=>s.descriptionText_uz=t)},null,2),[[g,s.descriptionText_uz]])]),e("div",oe,[se,i.banner_ru_prev?(n(),l("img",{key:0,style:{"max-height":"250px"},src:i.banner_ru_prev,class:"image_prev mt-4 mb-4"},null,8,ne)):b("",!0)]),e("div",le,[ie,h(e("input",{disabled:"",type:"number",class:_(["form-control",{"border border-danger":r.v$.price.$errors.length>0}]),placeholder:"100",id:"exampleInputTitleUZ","onUpdate:modelValue":o[5]||(o[5]=t=>s.price=t)},null,2),[[g,s.price]]),(n(!0),l(d,null,p(r.v$.price.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))]),e("div",ae,[ue,h(e("input",{disabled:"",type:"number",class:_(["form-control",{"border border-danger":r.v$.amount.$errors.length>0}]),placeholder:"10",id:"exampleInputTitleUZ","onUpdate:modelValue":o[6]||(o[6]=t=>s.amount=t)},null,2),[[g,s.amount]]),(n(!0),l(d,null,p(r.v$.amount.$errors,(t,u)=>(n(),l("small",{class:"error",key:u},a(t.$message),1))),128))])])],32)])])]),e("div",ce,[e("div",de,[e("div",pe,[me,e("table",he,[_e,s.orders.length>0?(n(),l("tbody",ve,[(n(!0),l(d,null,p(s.orders,t=>(n(),l("tr",{key:t.id},[e("td",null,a(t.productOrderCount),1),e("td",null,a(t.productOrderTime),1),e("td",null,a(t.productCode),1)]))),128))])):b("",!0)])])])])])])],64)}const ye=w(E,[["render",ge],["__scopeId","data-v-d4663e33"]]);export{ye as default};
