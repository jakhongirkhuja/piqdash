import{G as V}from"./GoBackButton.8ec57f12.js";import{c as F}from"./vue-datepicker.es.17b3f44e.js";import{h as x}from"./maska.esm.cd315c5a.js";import{u as U,r as p,m as k,a as S,s as C,e as E}from"./index.esm.b21b73c4.js";import{_ as A,j as B,r as D,k as L,o as t,c as n,f as I,a as e,F as m,e as h,d as _,t as i,l as O,w as d,v,n as b,m as w,p as P}from"./index.34e73fda.js";import{s as j}from"./globalFunction.5ce06618.js";const T={setup(){const u=B(new Date),o=l=>{const s=l.getDate(),c=l.getMonth()+1,f=l.getFullYear();return`${s}/${c}/${f}`},y=l=>{u.value=l};return{v$:U(),format:o,setDate:y}},directives:{maska:x},components:{GoBackButton:V,Datepicker:F},data(){return{url:"https://api.pharmiq.uz/",firstName:"",lastName:"",date:"",birthDate:"",gender:0,language:"ru",email:"",role:"SuperAdmin",phoneNumber:"",password:"",confirmPassword:"",resError:!1,resSuccess:!1,resStringError:"",userInfo:null}},computed:{checkGender(){return console.log(this.gender),this.gender==0},isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{firstName:{required:p,minLengthValue:k(1),maxLengthValue:S(30)},lastName:{required:p,minLengthValue:k(3),maxLengthValue:S(30)},phoneNumber:{required:p},birthDate:{required:p},gender:{required:p},role:{required:p},password:{required:p,minLength:k(8)},confirmPassword:{required:p,sameAsPassword:C(this.password)},language:{required:p},birthDate:{required:p},email:{email:E}}},methods:{changeFormat(){const u=this.phoneNumber.replace(/\D/g,"");this.phoneNumber="+"+u.substring(0,3)+" ( "+u.substring(3,5)+" ) "+u.substring(5,8)+"-"+u.substring(8,10)+"-"+u.substring(10,12)},trimFirstNameFunction(){this.firstName=this.firstName.trim()},trimLastNameFunction(){this.lastName=this.lastName.trim()},async requestApi(){const u=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"});let o=new Date(this.birthDate);const y=u.format(o),l={email:this.email,firstName:this.firstName,lastName:this.lastName,language:this.language,gender:this.gender,birthDate:y.split("/").reverse().join("-"),role:this.role,passwd:this.password,number:this.phoneNumber.replace(/\D/g,"")},s=j(),c=Object.assign(l,s);try{let f=localStorage.getItem("token");const N=await fetch(this.url+"api/v1/admin/add/user",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"Bearer "+f}}),g=await N.json();window.scrollTo({top:0,behavior:"smooth"}),N.status==401?this.resStringError=g.message:g.error?(console.log(typeof g.message=="object"),typeof g.message=="object"?this.resError=g.message:this.resStringError=g.message):this.resSuccess="User Successfully Added "}catch(f){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",f)}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()}},created(){this.userInfo=JSON.parse(localStorage.getItem("user"))}},G={class:"mt-3"},M={class:"row"},z={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},J={class:"card-body"},R=e("h4",{class:"card-title"},"Add User",-1),Y=e("p",{class:"card-description"}," Basic information ",-1),H={class:"error"},K={key:1,class:"error"},Q={key:2,class:"success"},W={class:"form-group row"},X={class:"col-md-6"},Z=e("label",{for:"exampleInputUsername1"},"Enter first name",-1),$={class:"col-md-6"},ee=e("label",{for:"exampleInputLastName"},"Enter last name",-1),re={class:"form-group row"},se={class:"col-md-6"},oe=e("label",{for:"exampleInputBirth"},"Date of Birth",-1),te={class:"col-md-6"},ne=e("label",{for:"phonebook"},"Phone Number",-1),le={class:"form-group row"},ae={class:"col-md-6"},ie=e("label",{for:"phonebook"},"Password",-1),me={class:"col-md-6"},de=e("label",{for:"phonebook"},"Password repeat",-1),ue={class:"form-group row"},ce={class:"col-md-12"},pe=e("label",{class:"col-sm-3 col-form-label"},"Choose gender",-1),he={class:"col-sm-4"},ge=e("label",{for:"gender1"},"Male",-1),fe={class:"col-sm-5"},_e=e("label",{for:"gender2"},"Female",-1),be={class:"form-group"},ve=e("label",{for:"exampleFormControlSelect1"},"Choose role",-1),ye={key:0,value:"Creator"},Ne={key:1,value:"Owner"},we={key:2,value:"Store Owner"},ke={key:3,value:"Analytic"},Se=e("option",{value:"SuperAdmin"},"SuperAdmin",-1),De=e("option",{value:"Scout"},"Scout",-1),Ie=e("option",{value:"Tester"},"Tester",-1),Ve={class:"form-group"},Fe=e("label",{for:"test1"},"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",-1),xe=e("label",{for:"test2"},"O'zbekcha",-1),Ue={class:"form-group"},Ce=e("label",{for:"exampleInputEmail1"},"Email address",-1),Ee=["disabled"];function Ae(u,o,y,l,s,c){const f=D("GoBackButton"),N=D("Datepicker"),g=L("maska");return t(),n(m,null,[I(f),e("div",G,[e("div",M,[e("div",z,[e("div",q,[e("div",J,[R,Y,s.resError?(t(!0),n(m,{key:0},h(s.resError,(r,a)=>(t(),n("p",H,i(a)+" : "+i(r[0]),1))),256)):_("",!0),s.resStringError?(t(),n("p",K,i(s.resStringError),1)):_("",!0),s.resSuccess?(t(),n("p",Q,i(s.resSuccess),1)):_("",!0),e("form",{class:"forms-sample",onSubmit:o[14]||(o[14]=O(r=>c.submitForm(),["prevent"]))},[e("div",W,[e("div",X,[Z,d(e("input",{type:"text",class:b(["form-control",{"border border-danger":l.v$.firstName.$errors.length>0}]),onInput:o[0]||(o[0]=(...r)=>c.trimFirstNameFunction&&c.trimFirstNameFunction(...r)),"onUpdate:modelValue":o[1]||(o[1]=r=>s.firstName=r),id:"exampleInputUsername1",placeholder:"First name"},null,34),[[v,s.firstName]]),(t(!0),n(m,null,h(l.v$.firstName.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("div",$,[ee,d(e("input",{type:"text",class:b(["form-control",{"border border-danger":l.v$.firstName.$errors.length>0}]),onInput:o[2]||(o[2]=(...r)=>c.trimLastNameFunction&&c.trimLastNameFunction(...r)),"onUpdate:modelValue":o[3]||(o[3]=r=>s.lastName=r),id:"exampleInputLastName",placeholder:"Last name"},null,34),[[v,s.lastName]]),(t(!0),n(m,null,h(l.v$.lastName.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))])]),e("div",re,[e("div",se,[oe,I(N,{modelValue:s.birthDate,"onUpdate:modelValue":o[4]||(o[4]=r=>s.birthDate=r),inputClassName:"form-control",format:l.format},null,8,["modelValue","format"]),(t(!0),n(m,null,h(l.v$.birthDate.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("div",te,[ne,d(e("input",{type:"text",placeholder:"+998 ( 99 ) 999-99-99",class:b(["form-control",{"border border-danger":l.v$.phoneNumber.$errors.length>0}]),"onUpdate:modelValue":o[5]||(o[5]=r=>s.phoneNumber=r)},null,2),[[g,["+998 ( ## ) ###-##-##","+998 ( ## ) ###-##-##"]],[v,s.phoneNumber]]),(t(!0),n(m,null,h(l.v$.phoneNumber.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))])]),e("div",le,[e("div",ae,[ie,d(e("input",{type:"password",placeholder:"********",class:b(["form-control",{"border border-danger":l.v$.password.$errors.length>0}]),"onUpdate:modelValue":o[6]||(o[6]=r=>s.password=r)},null,2),[[v,s.password]]),(t(!0),n(m,null,h(l.v$.password.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("div",me,[de,d(e("input",{type:"password",placeholder:"********",class:b(["form-control",{"border border-danger":l.v$.password.$errors.length>0}]),"onUpdate:modelValue":o[7]||(o[7]=r=>s.confirmPassword=r)},null,2),[[v,s.confirmPassword]]),(t(!0),n(m,null,h(l.v$.confirmPassword.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))])]),e("div",ue,[e("div",ce,[pe,(t(!0),n(m,null,h(l.v$.gender.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("div",he,[d(e("input",{type:"radio",id:"gender1",name:"radio-gender",checked:"",value:0,"onUpdate:modelValue":o[8]||(o[8]=r=>s.gender=r)},null,512),[[w,s.gender]]),ge]),e("div",fe,[d(e("input",{type:"radio",id:"gender2",name:"radio-gender",value:1,"onUpdate:modelValue":o[9]||(o[9]=r=>s.gender=r)},null,512),[[w,s.gender]]),_e])]),e("div",be,[ve,d(e("select",{class:b(["form-control",{"border border-danger":l.v$.role.$errors.length>0}]),"onUpdate:modelValue":o[10]||(o[10]=r=>s.role=r),id:"exampleFormControlSelect1"},[s.userInfo&&s.userInfo.role=="Creator"?(t(),n("option",ye,"Creator")):_("",!0),s.userInfo&&s.userInfo.role=="Creator"?(t(),n("option",Ne,"Owner")):_("",!0),s.userInfo&&(s.userInfo.role=="Creator"||s.userInfo.role=="Owner")?(t(),n("option",we,"Store Owner")):_("",!0),s.userInfo&&(s.userInfo.role=="Creator"||s.userInfo.role=="Owner")?(t(),n("option",ke,"Analytic")):_("",!0),Se,De,Ie],2),[[P,s.role]]),(t(!0),n(m,null,h(l.v$.role.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("div",Ve,[e("p",null,[d(e("input",{checked:"",type:"radio",id:"test1",name:"radio-language",value:"ru","onUpdate:modelValue":o[11]||(o[11]=r=>s.language=r)},null,512),[[w,s.language]]),Fe]),e("p",null,[d(e("input",{type:"radio",id:"test2",name:"radio-language",value:"uz","onUpdate:modelValue":o[12]||(o[12]=r=>s.language=r)},null,512),[[w,s.language]]),xe])]),e("div",Ue,[Ce,d(e("input",{type:"email",class:b(["form-control",{"border border-danger":l.v$.email.$errors.length>0}]),id:"exampleInputEmail1","onUpdate:modelValue":o[13]||(o[13]=r=>s.email=r),placeholder:"Email"},null,2),[[v,s.email]]),(t(!0),n(m,null,h(l.v$.email.$errors,(r,a)=>(t(),n("small",{class:"error",key:a},i(r.$message),1))),128))]),e("button",{type:"submit",disabled:c.isDisabled,class:"btn btn-primary mr-2"},"Create",8,Ee)],32)])])])])])],64)}const Ge=A(T,[["render",Ae]]);export{Ge as default};
