import{G as D}from"./GoBackButton.8ec57f12.js";import{c as x}from"./vue-datepicker.es.17b3f44e.js";import{h as w}from"./maska.esm.cd315c5a.js";import{u as S,r as v,m as k,i as I}from"./index.esm.b21b73c4.js";import{_ as U,r as A,o,c as n,f as T,a as e,F as p,e as _,d as g,t as d,l as z,w as m,a0 as E,v as f,n as b,a2 as V,a3 as B}from"./index.34e73fda.js";import{s as P}from"./globalFunction.5ce06618.js";const C={setup(){return{v$:S()}},directives:{maska:w},components:{GoBackButton:D,Datepicker:x},data(){return{url:"https://api.pharmiq.uz/",promo:"",price:null,startDate:null,endDate:null,added:!1,resError:!1,resSuccess:!1,resStringError:"",userInfo:null,monetized:0,winner:1}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},validations(){return{startDate:{required:v},endDate:{required:v},promo:{required:v,minLengthValue:k(3)},price:{required:v,integer:I}}},methods:{async requestApi(){this.added=!0;const u={promocode:this.promo.toUpperCase(),prizeType:this.monetized,prizeAmount:this.price,startDate:this.startDate.replace("T"," ")+":00",endDate:this.endDate.replace("T"," ")+":00",amountOfWinners:this.winner==""?null:this.winner},r=P(),y=Object.assign(u,r);var a=new FormData;for(const s in y)a.append(s,y[s]);try{let s=localStorage.getItem("token");const h=await fetch(this.url+"api/v1/promocode/add",{method:"POST",body:a,headers:{"Accept-Language":"en-US,en;q=0.8",accept:"application/json",Authorization:"Bearer "+s}}),c=await h.json();window.scrollTo({top:0,behavior:"smooth"}),h.status==401?(this.resStringError=c.message,this.added=!1):c.error?(typeof c.message=="object"?this.resError=c.message:this.resStringError=c.message,this.added=!1):this.resSuccess="PromoCode Successfully Added"}catch(s){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",s)}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()}},created(){this.userInfo=JSON.parse(localStorage.getItem("user"))}},l=u=>(V("data-v-d58aac20"),u=u(),B(),u),R={class:"mt-3"},q={class:"row"},Z={class:"col-md-12 grid-margin stretch-card"},j={class:"card"},F={class:"card-body"},O=l(()=>e("h4",{class:"card-title"},"Add Promcoe",-1)),$={class:"error"},G={key:1,class:"error"},L={key:2,class:"success"},M={class:"form-group row"},N=l(()=>e("div",{class:"col-md-6"},null,-1)),W={class:"col-md-6 text-right"},H=l(()=>e("label",{for:"exampleInputstartRu"},"Prize Type",-1)),J=l(()=>e("br",null,null,-1)),Q={class:"language-switcher"},K=l(()=>e("span",{class:"slider round"},null,-1)),X=l(()=>e("span",{class:"select-ru"},"iqc",-1)),Y=l(()=>e("span",{class:"select-uz"},"exp",-1)),ee={class:"form-group row"},se={class:"col-md-4"},te=l(()=>e("label",{for:"exampleInputTitleRu"},"Promocode",-1)),re={class:"col-md-4"},oe=l(()=>e("label",{for:"exampleInputTitleUZ"},"Price Amount",-1)),ne={class:"col-md-4"},le=l(()=>e("label",{for:"exampleInputTitlewinnerUZ"},"Amount Of Winners",-1)),ae={class:"form-group row"},ie={class:"col-md-6"},de=l(()=>e("label",{for:"exampleInputstartRu"},"Start Date",-1)),ce={class:"col-md-6"},ue=l(()=>e("label",{for:"exampleInputendUZ"},"End Date ",-1)),pe=["disabled"];function me(u,r,y,a,s,h){const c=A("GoBackButton");return o(),n(p,null,[T(c),e("div",R,[e("div",q,[e("div",Z,[e("div",j,[e("div",F,[O,s.resError?(o(!0),n(p,{key:0},_(s.resError,(t,i)=>(o(),n("p",$,d(i)+" : "+d(t[0]),1))),256)):g("",!0),s.resStringError?(o(),n("p",G,d(s.resStringError),1)):g("",!0),s.resSuccess?(o(),n("p",L,d(s.resSuccess),1)):g("",!0),e("form",{class:"forms-sample",onSubmit:r[6]||(r[6]=z(t=>h.submitForm(),["prevent"]))},[e("div",M,[N,e("div",W,[H,J,e("label",Q,[m(e("input",{type:"checkbox",disabled:"","onUpdate:modelValue":r[0]||(r[0]=t=>s.monetized=t)},null,512),[[E,s.monetized]]),K,X,Y])])]),e("div",ee,[e("div",se,[te,m(e("input",{type:"text",class:b(["form-control capilizie",{"border border-danger":a.v$.promo.$errors.length>0}]),placeholder:"PHARMIQ245",id:"exampleInputTitleRu","onUpdate:modelValue":r[1]||(r[1]=t=>s.promo=t)},null,2),[[f,s.promo]]),(o(!0),n(p,null,_(a.v$.promo.$errors,(t,i)=>(o(),n("small",{class:"error",key:i},d(t.$message),1))),128))]),e("div",re,[oe,m(e("input",{type:"text",class:b(["form-control",{"border border-danger":a.v$.price.$errors.length>0}]),placeholder:"100",id:"exampleInputTitleUZ","onUpdate:modelValue":r[2]||(r[2]=t=>s.price=t)},null,2),[[f,s.price]]),(o(!0),n(p,null,_(a.v$.price.$errors,(t,i)=>(o(),n("small",{class:"error",key:i},d(t.$message),1))),128))]),e("div",ne,[le,m(e("input",{type:"number",class:"form-control",placeholder:"1",id:"exampleInputTitlewinnerUZ","onUpdate:modelValue":r[3]||(r[3]=t=>s.winner=t)},null,512),[[f,s.winner]])])]),e("div",ae,[e("div",ie,[de,m(e("input",{type:"datetime-local",class:b(["form-control",{"border border-danger":a.v$.startDate.$errors.length>0}]),id:"exampleInputstartRu","onUpdate:modelValue":r[4]||(r[4]=t=>s.startDate=t)},null,2),[[f,s.startDate]]),(o(!0),n(p,null,_(a.v$.startDate.$errors,(t,i)=>(o(),n("small",{class:"error",key:i},d(t.$message),1))),128))]),e("div",ce,[ue,m(e("input",{type:"datetime-local",class:b(["form-control",{"border border-danger":a.v$.startDate.$errors.length>0}]),id:"exampleInputendUZ","onUpdate:modelValue":r[5]||(r[5]=t=>s.endDate=t)},null,2),[[f,s.endDate]]),(o(!0),n(p,null,_(a.v$.endDate.$errors,(t,i)=>(o(),n("small",{class:"error",key:i},d(t.$message),1))),128))])]),s.added?g("",!0):(o(),n("button",{key:0,type:"submit",disabled:h.isDisabled,class:"btn btn-primary mr-2"},"Create",8,pe))],32)])])])])])],64)}const ye=U(C,[["render",me],["__scopeId","data-v-d58aac20"]]);export{ye as default};
