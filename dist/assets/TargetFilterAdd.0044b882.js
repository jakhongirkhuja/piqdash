import{G as w}from"./GoBackButton.8ec57f12.js";import{c as V}from"./vue-datepicker.es.17b3f44e.js";import{h as D}from"./maska.esm.cd315c5a.js";import{u as U,r as A}from"./index.esm.b21b73c4.js";import{m as E}from"./default.css_vue_type_style_index_1_src_true_lang.61cceff5.js";import{M as j}from"./vue-multiselect.min.6cecc5c4.js";import{s as x}from"./globalFunction.5ce06618.js";import{_ as B,r as k,o as r,c as l,f as b,a as t,F as h,e as S,d as p,t as u,l as T,w as g,p as I,n as F,m as y,g as _,a1 as G,a2 as N,a3 as C}from"./index.34e73fda.js";import"./_commonjsHelpers.712cc82f.js";const R={setup(){return{v$:U()}},directives:{maska:D},components:{GoBackButton:w,Datepicker:V,Slider:E,Multiselect:j},data(){return{url:"https://api.pharmiq.uz/",promo:"",title:"",gender:"all",nrole:"all",age:"all",rage:[18,90],nage:20,price:null,groupID:null,startDate:null,endDate:null,added:!1,selectedNumbers:[],resError:!1,resSuccess:!1,resStringError:"",userInfo:null,monetized:0,customNumbers:0,numbers:0,groups:[]}},computed:{isDisabled:function(){if(this.v$.$touch(),this.v$.$error)return!0}},mounted(){$(".js-example-basic-multiple").select2(),$(".js-example-basic-multiple").change(function(){var n=$(".js-example-basic-multiple").select2("val");localStorage.setItem("role",n)})},validations(){return{groupID:{required:A}}},methods:{checkvalues(){this.nage>90&&(this.nage=90),this.nage<18&&(this.nage=18)},async requestApi(){this.added=!0;let n={group_id:this.groupID,gender:this.gender,ageRange:this.age=="all"?"all":this.age==1?this.rage:this.nage,roleList:localStorage.getItem("role")?localStorage.getItem("role"):"all"};const o=x(),m=Object.assign(n,o);var a=new FormData;for(const e in m)a.append(e,m[e]);try{let e=localStorage.getItem("token");const d=await fetch(this.url+"api/v1/targetFilter/add",{method:"POST",body:a,headers:{"Accept-Language":"en-US,en;q=0.8",accept:"application/json",Authorization:"Bearer "+e}}),c=await d.json();window.scrollTo({top:0,behavior:"smooth"}),d.status==401?(this.resStringError=c.message,this.added=!1):c.error?(typeof c.message=="object"?this.resError=c.message:this.resStringError=c.message,this.added=!1):this.resSuccess="Target filter Successfully Added"}catch(e){console.error("\u041E\u0448\u0438\u0431\u043A\u0430:",e)}},submitForm(){this.v$.$touch(),!this.v$.$error&&this.requestApi()},getGroups(){let n=this.url+"api/v1/groups?page=1",o=localStorage.getItem("token");const m={method:"GET",headers:new Headers({accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o})};fetch(n,m).then(a=>(a.status==401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="https://go.pharmiq.uz/"),a.json())).then(a=>{this.response=a,this.groups=a.data,console.log(this.groups)})}},created(){this.userInfo=JSON.parse(localStorage.getItem("user")),this.getGroups()}},i=n=>(N("data-v-2f30205d"),n=n(),C(),n),q={class:"mt-3"},z={class:"row"},M={class:"col-md-12 grid-margin stretch-card"},O={class:"card"},L={class:"card-body"},P=i(()=>t("h4",{class:"card-title"},"Add Target Filter",-1)),Z={class:"error"},H={key:1,class:"error"},J={key:2,class:"success"},K={class:"form-group row"},Q={class:"col-md-12"},W=i(()=>t("label",{class:"col-sm-12",for:"banner"},"Group",-1)),X=i(()=>t("option",{disabled:""},"Please select one",-1)),Y=["value"],ee={class:"form-group row"},te={class:"col-md-4 gender"},se=i(()=>t("label",{for:"exampleInputGenderRu"},"Gender",-1)),oe={class:"row"},re={class:"col-md-4"},le={for:"all"},ae=_("All "),ne={class:"col-md-4"},ie={for:"man"},de=_("Man "),ce={class:"col-md-4"},ue={for:"femaile"},pe=_("Female "),me={class:"col-md-4"},ge=G('<label for="exampleInputTitleUZ" data-v-2f30205d>Role</label><select multiple="multiple" class="form-control js-example-basic-multiple" data-v-2f30205d><option selected value="all" data-v-2f30205d>All</option><option value="Employee" data-v-2f30205d>Employee</option><option value="Company Owner" data-v-2f30205d>Company Owner</option></select>',2),he={class:"col-md-4"},_e=i(()=>t("label",{for:"exampleInputTitleUZ"},"Age",-1)),fe=i(()=>t("option",{selected:"",value:"all"},"All",-1)),ve=i(()=>t("option",{value:"0"},"Range",-1)),be=i(()=>t("option",{value:"1"},"Range Limits",-1)),Se=[fe,ve,be],ye={key:0,class:"mb-2 mt-5"},ke={key:1,class:"mt-5"},Ie=["disabled"];function we(n,o,m,a,e,d){const c=k("GoBackButton"),f=k("Slider");return r(),l(h,null,[b(c),t("div",q,[t("div",z,[t("div",M,[t("div",O,[t("div",L,[P,e.resError?(r(!0),l(h,{key:0},S(e.resError,(s,v)=>(r(),l("p",Z,u(v)+" : "+u(s[0]),1))),256)):p("",!0),e.resStringError?(r(),l("p",H,u(e.resStringError),1)):p("",!0),e.resSuccess?(r(),l("p",J,u(e.resSuccess),1)):p("",!0),t("form",{class:"forms-sample",onSubmit:o[7]||(o[7]=T(s=>d.submitForm(),["prevent"]))},[t("div",K,[t("div",Q,[W,g(t("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.groupID=s),class:F(["form-control",{"border border-danger":a.v$.groupID.$errors.length>0}])},[X,(r(!0),l(h,null,S(e.groups,s=>(r(),l("option",{key:s.id,value:s.id},u(s.groupName),9,Y))),128))],2),[[I,e.groupID]]),(r(!0),l(h,null,S(a.v$.groupID.$errors,(s,v)=>(r(),l("small",{class:"error",key:v},u(s.$message),1))),128))])]),t("div",ee,[t("div",te,[se,t("div",oe,[t("div",re,[t("label",le,[g(t("input",{id:"all",type:"radio",class:"l-2","onUpdate:modelValue":o[1]||(o[1]=s=>e.gender=s),value:"all"},null,512),[[y,e.gender]]),ae])]),t("div",ne,[t("label",ie,[g(t("input",{id:"man",type:"radio",class:"l-2","onUpdate:modelValue":o[2]||(o[2]=s=>e.gender=s),value:"0"},null,512),[[y,e.gender]]),de])]),t("div",ce,[t("label",ue,[g(t("input",{id:"femaile",type:"radio",class:"","onUpdate:modelValue":o[3]||(o[3]=s=>e.gender=s),value:"1"},null,512),[[y,e.gender]]),pe])])])]),t("div",me,[_(u(e.nrole)+" ",1),ge]),t("div",he,[_e,g(t("select",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.age=s),class:"form-control"},Se,512),[[I,e.age]]),e.age==0?(r(),l("div",ye,[b(f,{onUpdate:d.checkvalues,modelValue:e.nage,"onUpdate:modelValue":o[5]||(o[5]=s=>e.nage=s)},null,8,["onUpdate","modelValue"])])):p("",!0),e.age==1?(r(),l("div",ke,[b(f,{onUpdate:d.checkvalues,modelValue:e.rage,"onUpdate:modelValue":o[6]||(o[6]=s=>e.rage=s)},null,8,["onUpdate","modelValue"])])):p("",!0)])]),e.added?p("",!0):(r(),l("button",{key:0,type:"submit",disabled:d.isDisabled,class:"btn btn-primary mr-2"},"Create",8,Ie))],32)])])])])])],64)}const Fe=B(R,[["render",we],["__scopeId","data-v-2f30205d"]]);export{Fe as default};
